(function(e){function t(t){for(var r,a,i=t[0],o=t[1],u=t[2],l=0,d=[];l<i.length;l++)a=i[l],Object.prototype.hasOwnProperty.call(c,a)&&c[a]&&d.push(c[a][0]),c[a]=0;for(r in o)Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r]);b&&b(t);while(d.length)d.shift()();return s.push.apply(s,u||[]),n()}function n(){for(var e,t=0;t<s.length;t++){for(var n=s[t],r=!0,a=1;a<n.length;a++){var i=n[a];0!==c[i]&&(r=!1)}r&&(s.splice(t--,1),e=o(o.s=n[0]))}return e}var r={},a={app:0},c={app:0},s=[];function i(e){return o.p+"js/"+({}[e]||e)+"."+{"chunk-2d2228eb":"aa806cff","chunk-2e146562":"c50051fa","chunk-2d0ab43a":"faf91ad3","chunk-2d0ac059":"93989439","chunk-3dc730e8":"5c6e0f81","chunk-e98b8236":"a9c67ac5"}[e]+".js"}function o(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.e=function(e){var t=[],n={"chunk-2e146562":1,"chunk-3dc730e8":1,"chunk-e98b8236":1};a[e]?t.push(a[e]):0!==a[e]&&n[e]&&t.push(a[e]=new Promise((function(t,n){for(var r="css/"+({}[e]||e)+"."+{"chunk-2d2228eb":"31d6cfe0","chunk-2e146562":"b9ff0d58","chunk-2d0ab43a":"31d6cfe0","chunk-2d0ac059":"31d6cfe0","chunk-3dc730e8":"3e0c2dee","chunk-e98b8236":"31cb8989"}[e]+".css",c=o.p+r,s=document.getElementsByTagName("link"),i=0;i<s.length;i++){var u=s[i],l=u.getAttribute("data-href")||u.getAttribute("href");if("stylesheet"===u.rel&&(l===r||l===c))return t()}var d=document.getElementsByTagName("style");for(i=0;i<d.length;i++){u=d[i],l=u.getAttribute("data-href");if(l===r||l===c)return t()}var b=document.createElement("link");b.rel="stylesheet",b.type="text/css",b.onload=t,b.onerror=function(t){var r=t&&t.target&&t.target.src||c,s=new Error("Loading CSS chunk "+e+" failed.\n("+r+")");s.code="CSS_CHUNK_LOAD_FAILED",s.request=r,delete a[e],b.parentNode.removeChild(b),n(s)},b.href=c;var f=document.getElementsByTagName("head")[0];f.appendChild(b)})).then((function(){a[e]=0})));var r=c[e];if(0!==r)if(r)t.push(r[2]);else{var s=new Promise((function(t,n){r=c[e]=[t,n]}));t.push(r[2]=s);var u,l=document.createElement("script");l.charset="utf-8",l.timeout=120,o.nc&&l.setAttribute("nonce",o.nc),l.src=i(e);var d=new Error;u=function(t){l.onerror=l.onload=null,clearTimeout(b);var n=c[e];if(0!==n){if(n){var r=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src;d.message="Loading chunk "+e+" failed.\n("+r+": "+a+")",d.name="ChunkLoadError",d.type=r,d.request=a,n[1](d)}c[e]=void 0}};var b=setTimeout((function(){u({type:"timeout",target:l})}),12e4);l.onerror=l.onload=u,document.head.appendChild(l)}return Promise.all(t)},o.m=e,o.c=r,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(n,r,function(t){return e[t]}.bind(null,r));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/simple-twitter-vue/",o.oe=function(e){throw console.error(e),e};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],l=u.push.bind(u);u.push=t,u=u.slice();for(var d=0;d<u.length;d++)t(u[d]);var b=l;s.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"001c":function(e,t,n){},"05db":function(e,t,n){"use strict";n("514c")},"15b0":function(e,t,n){"use strict";var r=n("7a23");function a(e,t){return Object(r["r"])(),Object(r["d"])("div",null,[Object(r["h"])("div",{class:"mask-bg",onClick:t[1]||(t[1]=Object(r["I"])((function(t){return e.hideMask()}),["prevent"]))})])}var c={name:"Mask",emits:["hide-mask"],setup:function(e,t){var n=t.emit,r=function(){n("hide-mask")};return{hideMask:r}}};n("cd7e");c.render=a;t["a"]=c},"211d":function(e,t,n){},"2fa3":function(e,t,n){"use strict";n.d(t,"c",(function(){return u})),n.d(t,"b",(function(){return l})),n.d(t,"a",(function(){return d})),n.d(t,"d",(function(){return b}));n("d3b7");var r=n("bc3a"),a=n.n(r),c=n("3d20"),s=n.n(c),i="https://simple-twitter-project-api.herokuapp.com/",o=a.a.create({baseURL:i});o.interceptors.request.use((function(e){var t=localStorage.getItem("token");return t&&(e.headers["Authorization"]="Bearer ".concat(t)),e}),(function(e){return Promise.reject(e)}));var u=o,l=s.a.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3}),d=s.a.mixin({title:"確定刪除嗎？",text:"刪除後無法復原",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"確定刪除！"}),b=function(e,t){var n=0;return function(){var r=this,a=arguments,c=+new Date;c-n>=t&&(n=c,e.apply(r,a))}}},3323:function(e,t,n){"use strict";n("5454")},4665:function(e,t,n){},4678:function(e,t,n){var r={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn-bd":"9686","./bn-bd.js":"9686","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-in":"ec2e","./en-in.js":"ec2e","./en-nz":"6f50","./en-nz.js":"6f50","./en-sg":"b7e9","./en-sg.js":"b7e9","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-mx":"b5b7","./es-mx.js":"b5b7","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fil":"d69a","./fil.js":"d69a","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-deva":"aaf2","./gom-deva.js":"aaf2","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./oc-lnc":"167b","./oc-lnc.js":"167b","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tk":"5aff","./tk.js":"5aff","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-mo":"3a6c","./zh-mo.js":"3a6c","./zh-tw":"90ea","./zh-tw.js":"90ea"};function a(e){var t=c(e);return n(t)}function c(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}a.keys=function(){return Object.keys(r)},a.resolve=c,e.exports=a,a.id="4678"},"4cce":function(e,t,n){"use strict";var r=n("2fa3");t["a"]={getCurrentUser:function(){return r["c"].get("/get_current_user")},getTweets:function(e){var t=e.userId;return r["c"].get("/users/".concat(t,"/tweets"))},getFriends:function(e){var t=e.userId;return r["c"].get("/users/".concat(t,"/friends"))},addLike:function(e){var t=e.tweetId;return r["c"].post("/tweets/".concat(t,"/like"),{})},deleteLike:function(e){var t=e.tweetId;return r["c"].delete("/tweets/".concat(t,"/like"))},getUser:function(e){var t=e.userId;return r["c"].get("/users/".concat(t))},putUser:function(e){var t=e.formData,n=e.userId;return r["c"].put("/users/".concat(n),t)},getMyFollowings:function(){return r["c"].get("/get_current_user_followings")},deleteFollowShip:function(e){var t=e.followerId,n=e.followingId;return r["c"].delete("/followships/".concat(n),{data:{followerId:t}})},addFollowing:function(e){var t=e.followingId;return r["c"].post("/followships",{followingId:t})}}},"514c":function(e,t,n){},5454:function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("7a23"),a={class:"body"},c={id:"simple-twitter"};function s(e,t){var n=Object(r["z"])("Navbar"),s=Object(r["z"])("router-view");return Object(r["r"])(),Object(r["d"])("div",a,[Object(r["h"])("div",c,[Object(r["h"])(n)]),Object(r["h"])(s)])}n("7b17"),n("ab8b"),n("b0c0");var i=n("65cb"),o=n.n(i),u={class:"\r\n      navbar\r\n      sticky-top\r\n      navbar-expand-lg navbar-light\r\n      bg-white\r\n      padding-none\r\n    "},l={class:"container-fluid d-flex justify-content-start"},d=Object(r["h"])("img",{src:o.a,class:"logo",alt:"logo"},null,-1),b={class:"d-none"},f={class:"d-flex account-setting"},p={"aria-label":"帳號控制項和設定",class:"d-flex dropdown-button align-items-center"},m=Object(r["h"])("button",{class:"btn-circle"},[Object(r["h"])("i",{class:"fab fa-2x fa-facebook-messenger"})],-1),h=Object(r["f"])('<button type="button" class="btn-circle" id="applicationDropdownButton" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><i class="fas fa-2x fa-bars"></i></button><div class="dropdown-menu dropdown-content overflow-auto" aria-labelledby="applicationDropdownButton"><a class="dropdown-item" href="#">item</a><a class="dropdown-item" href="#">item</a></div><button class="btn-circle" id="bellDropdownButton" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><i class="fas fa-2x fa-bell"></i></button><div class="dropdown-menu dropdown-content overflow-auto" aria-labelledby="bellDropdownButton"><a class="dropdown-item" href="#">通知</a><a class="dropdown-item" href="#">通知</a></div><button class="btn-circle" id="accountDropdownButton" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><i class="fas fa-2x fa-caret-down"></i></button>',5),j={class:"dropdown-menu dropdown-content overflow-auto","aria-labelledby":"accountDropdownButton"},w=Object(r["h"])("div",{class:"dropdown-divider"},null,-1),O={key:1,class:"dropdown-item",href:"#"},v={class:"d-block d-sm-none mx-3 width-100 search"},g={class:"d-none"};function k(e,t){var n=Object(r["z"])("router-link");return Object(r["r"])(),Object(r["d"])("nav",u,[Object(r["h"])("div",l,[Object(r["h"])(n,{class:"navbar-brand mr-0",to:"/",style:{display:"block"}},{default:Object(r["G"])((function(){return[d]})),_:1}),Object(r["h"])("form",{class:"form-inline d-none d-sm-block ms-2",onSubmit:t[4]||(t[4]=Object(r["I"])((function(){return e.handleSearch&&e.handleSearch.apply(e,arguments)}),["prevent"]))},[Object(r["H"])(Object(r["h"])("input",{class:"form-control mr-sm-2 rounded-pill",type:"search",placeholder:"Search","aria-label":"Search","onUpdate:modelValue":t[1]||(t[1]=function(t){return e.searchString=t}),onBlur:t[2]||(t[2]=function(){return e.cancelIsSearching&&e.cancelIsSearching.apply(e,arguments)}),onFocus:t[3]||(t[3]=function(){return e.confirmIsSearching&&e.confirmIsSearching.apply(e,arguments)})},null,544),[[r["D"],e.searchString]]),Object(r["h"])("span",b,Object(r["B"])(e.isSearching),1)],32),Object(r["h"])("div",f,[Object(r["h"])("div",p,[Object(r["h"])(n,{to:{name:"chat-index"}},{default:Object(r["G"])((function(){return[m]})),_:1}),h,Object(r["h"])("div",j,[Object(r["h"])(n,{class:"dropdown-item",to:{name:"user",params:{id:e.currentUser.id}}},{default:Object(r["G"])((function(){return[Object(r["g"])(Object(r["B"])(e.currentUser.name),1)]})),_:1},8,["to"]),w,e.isAuthenticated?(Object(r["r"])(),Object(r["d"])("a",{key:0,class:"dropdown-item",href:"#",onClick:t[5]||(t[5]=function(){return e.logout&&e.logout.apply(e,arguments)})},"登出")):(Object(r["r"])(),Object(r["d"])("a",O,"登入"))])])])]),Object(r["h"])("div",v,[Object(r["h"])("form",{class:"form-inline",onSubmit:t[9]||(t[9]=Object(r["I"])((function(){return e.handleSearch&&e.handleSearch.apply(e,arguments)}),["prevent"]))},[Object(r["H"])(Object(r["h"])("input",{class:"form-control mr-sm-2 search-input rounded-pill",type:"search",placeholder:"Search","aria-label":"Search","onUpdate:modelValue":t[6]||(t[6]=function(t){return e.searchString=t}),onBlur:t[7]||(t[7]=function(){return e.cancelIsSearching&&e.cancelIsSearching.apply(e,arguments)}),onFocus:t[8]||(t[8]=function(){return e.confirmIsSearching&&e.confirmIsSearching.apply(e,arguments)})},null,544),[[r["D"],e.searchString]]),Object(r["h"])("span",g,Object(r["B"])(e.isSearching),1)],32)])])}var x=n("5530"),y=n("5502"),T={setup:function(){var e=Object(r["x"])(""),t=Object(r["x"])(!1),n=function(){console.log(e.value)},a=function(){t.value=!0},c=function(){t.value=!1};return{searchString:e,isSearching:t,handleSearch:n,confirmIsSearching:a,cancelIsSearching:c}},computed:Object(x["a"])({},Object(y["b"])(["currentUser","isAuthenticated"])),methods:{logout:function(){this.$store.commit("revokeAuthentication"),this.$router.push("/signin")}}};n("6005");T.render=k;var U=T,C={name:"App",components:{Navbar:U}};n("64be");C.render=s;var I=C,S=n("1da1"),E=(n("96cf"),n("d3b7"),n("3ca3"),n("ddb0"),n("6c02"));function D(e,t){return Object(r["r"])(),Object(r["d"])("h1",null,"404 Not Found")}const A={};A.render=D;var L=A,z={class:"form-signin mt-5"},B=Object(r["h"])("div",{class:"text-center mb-4"},[Object(r["h"])("h1",{class:"h2 mb-3 font-weight-normal"},"Sign In")],-1),M={class:"form-label-group mb-3"},P={class:"text-center"},_={class:"text-center mb-3"},R=Object(r["g"])(" Sign Up "),H=Object(r["h"])("p",{class:"mt-5 mb-3 text-muted text-center"},"© 2021",-1);function N(e,t){var n=Object(r["z"])("router-link");return Object(r["r"])(),Object(r["d"])("div",z,[Object(r["h"])("form",{enctype:"application/x-www-form-urlencoded",class:"w-100",onSubmit:t[3]||(t[3]=Object(r["I"])((function(){return e.handleSubmit&&e.handleSubmit.apply(e,arguments)}),["prevent"]))},[B,Object(r["h"])("div",M,[Object(r["H"])(Object(r["h"])("input",{id:"email","onUpdate:modelValue":t[1]||(t[1]=function(t){return e.email=t}),name:"email",type:"email",class:"form-control",placeholder:"email",autocomplete:"username",required:"",autofocus:""},null,512),[[r["D"],e.email]]),Object(r["H"])(Object(r["h"])("input",{id:"password","onUpdate:modelValue":t[2]||(t[2]=function(t){return e.password=t}),name:"password",type:"password",class:"form-control",placeholder:"Password",autocomplete:"current-password",required:""},null,512),[[r["D"],e.password]])]),Object(r["h"])("div",P,[Object(r["h"])("button",{class:"btn btn-lg btn-primary btn-block mb-3",type:"submit",disabled:e.isProcessing}," Submit ",8,["disabled"])]),Object(r["h"])("div",_,[Object(r["h"])("p",null,[Object(r["h"])(n,{to:"/signup"},{default:Object(r["G"])((function(){return[R]})),_:1})])]),H],32)])}var q=n("2fa3"),F={signIn:function(e){var t=e.email,n=e.password;return q["c"].post("/signin",{email:t,password:n})},signUp:function(e){return q["c"].post("/signup",Object(x["a"])({},e))}},G={setup:function(){return{email:Object(r["x"])(""),password:Object(r["x"])(""),isProcessing:Object(r["x"])(!1)}},methods:{handleSubmit:function(){var e=this;return Object(S["a"])(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,e.email&&e.password){t.next=4;break}return q["b"].fire({icon:"warning",title:"請填入信箱及密碼"}),t.abrupt("return");case 4:return e.isProcessing=!0,t.next=7,F.signIn({email:e.email,password:e.password});case 7:if(n=t.sent,r=n.data,"success"===r.status){t.next=11;break}throw new Error(r.message);case 11:localStorage.setItem("token",r.token),e.$store.commit("setCurrentUser",r.user),e.$router.push("/tweets"),q["b"].fire({icon:"success",title:"登入成功"}),t.next=23;break;case 17:t.prev=17,t.t0=t["catch"](0),e.password="",q["b"].fire({icon:"error",title:"信箱或密碼錯誤"}),e.isProcessing=!1,console.log("Error: ",t.t0);case 23:case"end":return t.stop()}}),t,null,[[0,17]])})))()}}};n("7128");G.render=N;var V=G,$={class:"form-signin mt-5"},J=Object(r["h"])("div",{class:"text-center mb-4"},[Object(r["h"])("h1",{class:"h2 mb-3 font-weight-normal"},"Sign Up")],-1),K={class:"form-label-group mb-2"},Z=Object(r["h"])("label",{for:"name"},"Name",-1),Q={class:"form-label-group mb-2"},W=Object(r["h"])("label",{for:"email"},"Email",-1),X={class:"form-label-group mb-2"},Y=Object(r["h"])("label",{for:"password"},"Password",-1),ee={class:"form-label-group mb-3"},te=Object(r["h"])("label",{for:"password-check"},"Password Check",-1),ne=Object(r["h"])("div",{class:"text-center"},[Object(r["h"])("button",{class:"btn btn-lg btn-primary btn-block mb-3",type:"submit"}," Submit ")],-1),re={class:"text-center mb-3"},ae=Object(r["g"])(" Sign In "),ce=Object(r["h"])("p",{class:"mt-5 mb-3 text-muted text-center"},"© 2021",-1);function se(e,t){var n=Object(r["z"])("router-link");return Object(r["r"])(),Object(r["d"])("div",$,[Object(r["h"])("form",{class:"w-100",onSubmit:t[5]||(t[5]=Object(r["I"])((function(){return e.handleSubmit&&e.handleSubmit.apply(e,arguments)}),["prevent"])),enctype:"application/x-www-form-urlencoded"},[J,Object(r["h"])("div",K,[Z,Object(r["H"])(Object(r["h"])("input",{id:"name","onUpdate:modelValue":t[1]||(t[1]=function(t){return e.name=t}),name:"name",type:"text",class:"form-control",placeholder:"name",autocomplete:"username",required:"",autofocus:""},null,512),[[r["D"],e.name]])]),Object(r["h"])("div",Q,[W,Object(r["H"])(Object(r["h"])("input",{id:"email","onUpdate:modelValue":t[2]||(t[2]=function(t){return e.email=t}),name:"email",type:"email",class:"form-control",placeholder:"email",autocomplete:"email",required:"",autofocus:""},null,512),[[r["D"],e.email]])]),Object(r["h"])("div",X,[Y,Object(r["H"])(Object(r["h"])("input",{id:"password","onUpdate:modelValue":t[3]||(t[3]=function(t){return e.password=t}),name:"password",type:"password",class:"form-control",placeholder:"password",autocomplete:"new-password",required:""},null,512),[[r["D"],e.password]])]),Object(r["h"])("div",ee,[te,Object(r["H"])(Object(r["h"])("input",{id:"password-check","onUpdate:modelValue":t[4]||(t[4]=function(t){return e.passwordCheck=t}),name:"password-check",type:"password",class:"form-control",placeholder:"password-check",autocomplete:"new-password",required:""},null,512),[[r["D"],e.passwordCheck]])]),ne,Object(r["h"])("div",re,[Object(r["h"])("p",null,[Object(r["h"])(n,{to:"/signin"},{default:Object(r["G"])((function(){return[ae]})),_:1})])]),ce],32)])}var ie={setup:function(){return{name:Object(r["x"])(""),email:Object(r["x"])(""),password:Object(r["x"])(""),passwordCheck:Object(r["x"])("")}},methods:{handleSubmit:function(){var e=this;return Object(S["a"])(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,e.name&&e.email&&e.password&&e.passwordCheck){t.next=4;break}return q["b"].fire({icon:"warning",title:"請確認已填寫所有欄位"}),t.abrupt("return");case 4:if(e.password===e.passwordCheck){t.next=8;break}return q["b"].fire({icon:"warning",title:"兩次輸入的密碼不同"}),e.passwordCheck="",t.abrupt("return");case 8:return t.next=10,F.signUp({name:e.name,email:e.email,password:e.password,passwordCheck:e.passwordCheck});case 10:if(n=t.sent,r=n.data,"success"===r.status){t.next=14;break}throw new Error(r.message);case 14:q["b"].fire({icon:"success",title:"註冊成功"}),e.$router.push("/signin"),t.next=22;break;case 18:t.prev=18,t.t0=t["catch"](0),q["b"].fire({icon:"error",title:t.t0||"無法註冊，請稍後再試"}),console.log("Error: ",t.t0);case 22:case"end":return t.stop()}}),t,null,[[0,18]])})))()}}};n("b6f3");ie.render=se;var oe=ie,ue={class:"d-flex justify-content-center container-xxl mt-5"},le={class:"\r\n        min-height-90vh\r\n        padding-none\r\n        d-flex\r\n        col-xxl-6 col-xl-6 col-lg-7 col-md-8 col-sm-10 col-12\r\n        mx-auto\r\n      "};function de(e,t){var n=Object(r["z"])("Tweets");return Object(r["r"])(),Object(r["d"])("div",ue,[Object(r["h"])("div",le,[Object(r["h"])(n)])])}var be=n("c136"),fe={name:"home",components:{Tweets:be["a"]}};n("dfd4");fe.render=de;var pe=fe,me=n("4cce"),he=Object(y["a"])({state:{currentUser:{id:-1,name:"",email:"",avatar:""},isAuthenticated:!1,token:""},mutations:{setCurrentUser:function(e,t){e.currentUser=Object(x["a"])(Object(x["a"])({},e.currentUser),t),e.isAuthenticated=!0,e.token=localStorage.getItem("token")},revokeAuthentication:function(e){e.currentUser={},e.isAuthenticated=!1,e.token="",localStorage.removeItem("token")}},actions:{fetchCurrentUser:function(e){return Object(S["a"])(regeneratorRuntime.mark((function t(){var n,r,a,c,s,i,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.commit,t.prev=1,t.next=4,me["a"].getCurrentUser();case 4:if(r=t.sent,a=r.data,"error"!==a.status){t.next=8;break}throw new Error(a.message);case 8:return c=a.id,s=a.name,i=a.email,o=a.avatar,n("setCurrentUser",{id:c,name:s,email:i,avatar:o}),t.abrupt("return",!0);case 13:return t.prev=13,t.t0=t["catch"](1),console.log("Error: ",t.t0),n("revokeAuthentication"),t.abrupt("return",!1);case 18:case"end":return t.stop()}}),t,null,[[1,13]])})))()}},modules:{}}),je=[{path:"/",name:"root",redirect:"/signin"},{path:"/signin",name:"sign-in",component:V},{path:"/signup",name:"sign-up",component:oe},{path:"/tweets",name:"home",component:pe},{path:"/hashtag/:hashtag",name:"hashtag",component:function(){return n.e("chunk-e98b8236").then(n.bind(null,"e4ae"))}},{path:"/hashtag/:hashtag",name:"hashtag-not-exist",component:function(){return n.e("chunk-2d2228eb").then(n.bind(null,"ceb5"))}},{path:"/users/:id",name:"user",component:function(){return Promise.all([n.e("chunk-2e146562"),n.e("chunk-2d0ab43a")]).then(n.bind(null,"1511"))}},{path:"/users/:id",name:"not-exist",component:function(){return n.e("chunk-2d2228eb").then(n.bind(null,"ceb5"))}},{path:"/users/:id/tags",name:"tags",component:function(){return Promise.all([n.e("chunk-2e146562"),n.e("chunk-2d0ac059")]).then(n.bind(null,"1884"))}},{path:"/chat",name:"chat-index",component:function(){return n.e("chunk-3dc730e8").then(n.bind(null,"293a"))}},{path:"/chat/:chattingUserId",name:"chat-with-user",component:function(){return n.e("chunk-3dc730e8").then(n.bind(null,"293a"))}},{path:"/:pathMatch(.*)*",name:"not-found",component:L}],we=Object(E["a"])({history:Object(E["b"])(),linkExactActiveClass:"active",routes:je});we.beforeEach(function(){var e=Object(S["a"])(regeneratorRuntime.mark((function e(t,n,r){var a,c,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a=localStorage.getItem("token"),c=he.state.token,s=he.state.isAuthenticated,!a||a===c){e.next=7;break}return e.next=6,he.dispatch("fetchCurrentUser");case 6:s=e.sent;case 7:if(s||"sign-in"===t.name||"sign-up"===t.name){e.next=10;break}return r("/signin"),e.abrupt("return");case 10:if(!s||"sign-in"!==t.name){e.next=13;break}return r("/tweets"),e.abrupt("return");case 13:r();case 14:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}());var Oe=we;n("15f5"),n("7051");Object(r["c"])(I).use(he).use(Oe).mount("#app")},6005:function(e,t,n){"use strict";n("8727")},"64be":function(e,t,n){"use strict";n("c894")},"65cb":function(e,t,n){e.exports=n.p+"img/favicon.5773d45d.png"},6783:function(e,t,n){"use strict";n("a4d3"),n("e01a");var r=n("2fa3");t["a"]={get:function(){return r["c"].get("/tweets")},create:function(e){var t=e.tweetText,n=e.tags;return r["c"].post("/tweets",{tweetText:t,tags:n})},delete:function(e){var t=e.tweetId;return r["c"].delete("/tweets/".concat(t))},put:function(e){var t=e.description,n=e.tweetId;return r["c"].put("/tweets/".concat(n),{description:t})}}},"69b5":function(e,t,n){"use strict";n("001c")},"6a0d":function(e,t,n){"use strict";n("4665")},7128:function(e,t,n){"use strict";n("95e3")},8727:function(e,t,n){},"8f7b":function(e,t,n){"use strict";n("b0c0"),n("a4d3"),n("e01a");var r=n("7a23"),a={class:"bg-white border rounded mt-3 mx-2"},c={class:"d-flex mx-4 mt-2"},s={class:"my-auto"},i={class:"mx-2 flex"},o={class:"dropdown-button ml-auto my-auto"},u=Object(r["h"])("button",{class:"ellipsis",id:"tweetEllipsisDropdownButton","data-bs-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},[Object(r["h"])("i",{class:"fas fa-ellipsis-h"})],-1),l={key:0,class:"dropdown-menu dropdown-menu-end overflow-auto","aria-labelledby":"tweetEllipsisDropdownButton"},d={key:1,class:"dropdown-menu dropdown-menu-end overflow-auto","aria-labelledby":"tweetEllipsisDropdownButton"},b={class:"mx-4 mt-2"},f={class:"d-flex"},p={key:0,class:""},m=Object(r["h"])("i",{class:"far fa-thumbs-up text-primary"},null,-1),h={key:1},j={class:"mx-4 mt-2 d-flex py-2 border-top border-bottom"},w=Object(r["h"])("i",{class:"fas fa-thumbs-up"},null,-1),O=Object(r["g"])(" 讚"),v=Object(r["h"])("i",{class:"far fa-thumbs-up"},null,-1),g=Object(r["g"])(" 讚"),k=Object(r["h"])("span",null,[Object(r["h"])("i",{class:"far fa-comment-alt"}),Object(r["g"])(" 留言")],-1),x={class:""},y={class:"d-flex my-2"},T={class:"comment-div"},U={class:"flex px-3 py-1"},C={class:"word-wrap-break"};function I(e,t){var n=Object(r["z"])("router-link");return Object(r["r"])(),Object(r["d"])("div",a,[Object(r["h"])("div",null,[Object(r["h"])("div",c,[Object(r["h"])("div",s,[Object(r["h"])(n,{to:{name:"user",params:{id:e.tweet.User.id}}},{default:Object(r["G"])((function(){return[Object(r["h"])("img",{class:"avatar",src:e.tweet.User.avatar,alt:"avatar"},null,8,["src"])]})),_:1},8,["to"])]),Object(r["h"])("div",i,[Object(r["h"])("div",null,[Object(r["h"])(n,{class:"rounded-pill",to:{name:"user",params:{id:e.tweet.User.id}}},{default:Object(r["G"])((function(){return[Object(r["g"])(Object(r["B"])(e.tweet.User.name),1)]})),_:1},8,["to"])]),Object(r["h"])("div",null,Object(r["B"])(e.fromNow(e.tweet.createdAt)),1)]),Object(r["h"])("div",o,[u,e.isMyPage?(Object(r["r"])(),Object(r["d"])("div",l,[Object(r["h"])("a",{class:"dropdown-item",href:"#",onClick:t[1]||(t[1]=Object(r["I"])((function(t){return e.showMask("editTweet")}),["prevent"]))},"編輯"),Object(r["h"])("a",{class:"dropdown-item",href:"#",onClick:t[2]||(t[2]=Object(r["I"])((function(t){return e.deleteTweet(e.tweet.id)}),["prevent"]))},"刪除")])):(Object(r["r"])(),Object(r["d"])("div",d,[Object(r["h"])("a",{class:"dropdown-item",href:"#",onClick:t[3]||(t[3]=Object(r["I"])((function(){}),["prevent"]))},"取消")]))])]),Object(r["h"])("div",{innerHTML:e.tweet.description,class:"mx-4 mt-2 word-wrap-break"},null,8,["innerHTML"]),Object(r["h"])("div",b,[Object(r["H"])(Object(r["h"])("div",f,[e.tweet.likedCount?(Object(r["r"])(),Object(r["d"])("div",p,[m])):Object(r["e"])("",!0),e.tweet.likedCount?(Object(r["r"])(),Object(r["d"])("span",h,Object(r["B"])(e.tweet.likedCount),1)):Object(r["e"])("",!0),e.replies.length?(Object(r["r"])(),Object(r["d"])("a",{key:2,class:"ml-auto comment-collapse","data-bs-toggle":"collapse",href:"#collapse"+e.tweet.id,"aria-expanded":"false","aria-controls":"#comment-collapse"},Object(r["B"])(e.replies.length)+" 則留言 ",9,["href"])):Object(r["e"])("",!0)],512),[[r["E"],e.tweet.likedCount||e.replies.length]])]),Object(r["h"])("div",j,[e.tweet.isThumbsUp?(Object(r["r"])(),Object(r["d"])("div",{key:0,class:"flex-fill text-center operation-button",onClick:t[4]||(t[4]=Object(r["I"])((function(t){return e.deleteLike(e.tweet.id)}),["prevent"]))},[Object(r["h"])("span",{class:{textPrimary:e.tweet.isThumbsUp}},[w,O],2)])):(Object(r["r"])(),Object(r["d"])("div",{key:1,class:"flex-fill text-center operation-button",onClick:t[5]||(t[5]=Object(r["I"])((function(t){return e.addLike(e.tweet.id)}),["prevent"]))},[Object(r["h"])("span",{class:{textPrimary:e.tweet.isThumbsUp}},[v,g],2)])),Object(r["h"])("div",{class:"flex-fill text-center operation-button",onClick:t[6]||(t[6]=function(){return e.focusCommentInput&&e.focusCommentInput.apply(e,arguments)})},[k])])]),Object(r["h"])("div",{class:"collapse mx-4 mt-4",id:"collapse"+e.tweet.id,ref:"collapse"},[Object(r["h"])("form",{"aria-label":"建立留言",action:"POST",class:"bg-white rounded",onSubmit:t[8]||(t[8]=Object(r["I"])((function(t){return e.handleSubmit(e.tweet.id)}),["prevent"]))},[Object(r["h"])("div",x,[Object(r["h"])("div",y,[Object(r["h"])(n,{class:"rounded-pill",to:{name:"user",params:{id:e.currentUser.id}}},{default:Object(r["G"])((function(){return[Object(r["h"])("img",{class:"comment-avatar",src:e.currentUser.avatar,alt:"avatar"},null,8,["src"])]})),_:1},8,["to"]),Object(r["H"])(Object(r["h"])("input",{type:"text",placeholder:"留言......",class:"rounded-pill form-input form-control comment-input","onUpdate:modelValue":t[7]||(t[7]=function(t){return e.comment=t}),ref:"commentInput"},null,512),[[r["D"],e.comment]])]),Object(r["H"])(Object(r["h"])("div",null,[(Object(r["r"])(!0),Object(r["d"])(r["a"],null,Object(r["y"])(e.replies,(function(e){return Object(r["r"])(),Object(r["d"])("div",{class:"d-flex align-items-start mb-2",key:e.id},[Object(r["h"])("img",{class:"comment-avatar",src:e.User.avatar,alt:"avatar"},null,8,["src"]),Object(r["h"])("div",T,[Object(r["h"])("div",U,[Object(r["h"])(n,{class:"rounded-pill",to:{name:"user",params:{id:e.User.id}}},{default:Object(r["G"])((function(){return[Object(r["g"])(Object(r["B"])(e.User.name),1)]})),_:2},1032,["to"]),Object(r["h"])("div",C,Object(r["B"])(e.comment),1)])])])})),128))],512),[[r["E"],e.replies.length]])])],32)],8,["id"])])}var S=n("5530"),E=n("1da1"),D=(n("96cf"),n("a9e3"),n("caad"),n("2532"),n("c1df")),A=n.n(D),L=n("6c02"),z=n("4cce"),B=n("6783"),M=n("2fa3"),P={create:function(e){var t=e.tweetId,n=e.comment;return M["c"].post("/replies",{tweetId:t,comment:n})}},_=n("5502"),R={name:"TweetCard",props:{initialTweet:{type:Object},initialReplies:{type:Object}},emits:["after-add-like","after-delete-like","after-create-comment","after-delete-tweet","update-mask"],setup:function(e,t){var n=t.emit,a=Object(L["e"])(),c=Object(_["c"])(),s=Object(r["x"])(Boolean);a.params.id&&(s=Number(a.params.id)===c.state.currentUser.id);var i=Object(r["x"])(!0),o=Object(r["b"])({get:function(){return e.initialTweet}}),u=Object(r["b"])({get:function(){return e.initialReplies}}),l=Object(r["x"])(""),d=Object(r["x"])(null),b=Object(r["x"])(null),f=Object(M["d"])(function(){var e=Object(E["a"])(regeneratorRuntime.mark((function e(t){var r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,z["a"].deleteLike({tweetId:t});case 3:if(r=e.sent,a=r.data,"success"===a.status){e.next=7;break}throw new Error("無法按讚，請稍後再試");case 7:n("after-delete-like",t),e.next=14;break;case 10:e.prev=10,e.t0=e["catch"](0),M["b"].fire({icon:"error",title:"無法收回讚，請稍後再試"}),console.log("Error: ",e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),1e3),p=Object(M["d"])(function(){var e=Object(E["a"])(regeneratorRuntime.mark((function e(t){var r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,z["a"].addLike({tweetId:t});case 3:if(r=e.sent,a=r.data,"success"===a.status){e.next=7;break}throw new Error("無法按讚，請稍後再試");case 7:n("after-add-like",t),e.next=14;break;case 10:e.prev=10,e.t0=e["catch"](0),M["b"].fire({icon:"error",title:"無法按讚，請稍後再試"}),console.log("Error: ",e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),1e3),m=function(){var e=Object(E["a"])(regeneratorRuntime.mark((function e(t){var r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,P.create({tweetId:t,comment:l.value});case 3:if(r=e.sent,a=r.data,"success"===a.status){e.next=7;break}throw new Error("無法新增留言");case 7:n("after-create-comment",{tweetId:t,comment:l.value,user:c.state.currentUser,replyId:a.replyId}),l.value="",e.next=15;break;case 11:e.prev=11,e.t0=e["catch"](0),M["b"].fire({icon:"error",title:"無法新增留言，請稍後再試"}),console.log("Error: ",e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}(),h=function(e){return e?A()(e).fromNow():""},j=function(e){n("update-mask",{key:e,id:o.value.id})},w=function(){var e=Object(E["a"])(regeneratorRuntime.mark((function e(t){var r,a,c,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,M["a"].fire();case 3:if(r=e.sent,a=r.isConfirmed,!a){e.next=13;break}return e.next=8,B["a"].delete({tweetId:t});case 8:if(c=e.sent,s=c.data,"success"===s.status){e.next=12;break}throw new Error("貼文刪除失敗");case 12:n("after-delete-tweet",t);case 13:e.next=19;break;case 15:e.prev=15,e.t0=e["catch"](0),M["b"].fire({icon:"error",title:"無法刪除貼文，請稍後再試"}),console.log("Error: ",e.t0);case 19:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(t){return e.apply(this,arguments)}}();return{tweet:o,replies:u,comment:l,isAuthenticated:i,isMyPage:s,commentInput:d,collapse:b,deleteLike:f,addLike:p,handleSubmit:m,fromNow:h,showMask:j,deleteTweet:w}},methods:{focusCommentInput:function(){this.$refs.collapse.classList.value.includes("show")||(this.$refs.collapse.classList.value=this.collapse.classList.value+" show"),this.$refs.commentInput.focus()}},computed:Object(S["a"])({},Object(_["b"])(["currentUser","isAuthenticated"]))};n("05db");R.render=I;t["a"]=R},"95e3":function(e,t,n){},b6f3:function(e,t,n){"use strict";n("baff")},baff:function(e,t,n){},c136:function(e,t,n){"use strict";var r=n("7a23"),a={key:0,class:"z-index-1090 bg-white mask-box"},c={key:1,class:"container"},s={key:2,class:"spinner-border text-primary mx-auto",role:"status"},i=Object(r["h"])("span",{class:"visually-hidden"},"Loading...",-1);function o(e,t){var n=Object(r["z"])("Mask"),o=Object(r["z"])("EditTweet"),u=Object(r["z"])("CreateTweet"),l=Object(r["z"])("TweetCard");return Object(r["r"])(),Object(r["d"])(r["a"],null,[Object(r["H"])(Object(r["h"])("div",null,[Object(r["h"])(n,{onHideMask:e.hideMask},null,8,["onHideMask"])],512),[[r["E"],""!==e.isMask]]),"editTweet"===e.isMask?(Object(r["r"])(),Object(r["d"])("div",a,[Object(r["h"])(o,{initialTweet:e.toEditTweet,onAfterEditTweet:e.afterEditTweet},null,8,["initialTweet","onAfterEditTweet"])])):Object(r["e"])("",!0),e.isLoading?(Object(r["r"])(),Object(r["d"])("div",s,[i])):(Object(r["r"])(),Object(r["d"])("div",c,[Object(r["h"])(u,{onAfterCreateTweet:e.afterCreateTweet},null,8,["onAfterCreateTweet"]),(Object(r["r"])(!0),Object(r["d"])(r["a"],null,Object(r["y"])(e.tweetsData.tweets,(function(t){return Object(r["r"])(),Object(r["d"])(l,{key:t.id,"initial-tweet":t,"initial-replies":t.Replies,onAfterDeleteLike:e.afterDeleteLike,onAfterAddLike:e.afterAddLike,onAfterCreateComment:e.afterCreateComment,onAfterDeleteTweet:e.afterDeleteTweet,onUpdateMask:e.showMask},null,8,["initial-tweet","initial-replies","onAfterDeleteLike","onAfterAddLike","onAfterCreateComment","onAfterDeleteTweet","onUpdateMask"])})),128))]))],64)}var u=n("5530"),l=n("1da1"),d=(n("96cf"),n("d81d"),n("caad"),n("2532"),n("b0c0"),n("a4d3"),n("e01a"),n("4de4"),n("8f7b")),b={class:"text-align-end"},f={class:"d-flex mt-4 mb-2 mx-4"},p={class:"ms-2"},m={class:"mx-4 mb-2"},h={class:"hashtag-textarea"},j={class:"mb-2 mx-4"};function w(e,t){var n=Object(r["z"])("router-link");return Object(r["H"])((Object(r["r"])(),Object(r["d"])("form",{enctype:"application/x-www-form-urlencoded","aria-label":"建立 Tweet",action:"POST",class:"bg-white border rounded mt-4 mx-2",onSubmit:t[2]||(t[2]=Object(r["I"])((function(){return e.handleSubmit&&e.handleSubmit.apply(e,arguments)}),["prevent"]))},[Object(r["h"])("div",b,[Object(r["h"])("div",f,[Object(r["h"])(n,{class:"rounded-pill",to:{name:"user",params:{id:e.currentUser.id}}},{default:Object(r["G"])((function(){return[Object(r["h"])("img",{class:"avatar",src:e.currentUser.avatar,alt:"avatar"},null,8,["src"])]})),_:1},8,["to"]),Object(r["h"])("div",p,Object(r["B"])(e.currentUser.name),1)]),Object(r["h"])("div",m,[Object(r["h"])("div",h,[Object(r["h"])("div",{id:"textarea-overlay",class:"hashtag-textarea__overlay",innerHTML:e.tweetText},null,8,["innerHTML"]),Object(r["h"])("div",{id:"inputTrueText",onInput:t[1]||(t[1]=function(t){return e.replaceTweetText(t.target.innerText)}),class:"hashtag-textarea__true-text",wrap:"soft",contentEditable:"true",placeholder:e.currentUser.name+"，在想些什麼呢？",spellcheck:"false"},null,40,["placeholder"])])]),Object(r["h"])("div",j,[Object(r["h"])("button",{type:"submit",class:"btn btn-primary",disabled:e.isTweetTextEmpty||e.isProcessing},Object(r["B"])(e.isProcessing?"發佈中......":"發佈"),9,["disabled"])])])],544)),[[r["E"],e.isMyPage]])}n("a9e3"),n("4d63"),n("ac1f"),n("25f0"),n("466d"),n("5319"),n("99af"),n("498a");var O=n("5502"),v=n("6c02"),g=n("2fa3"),k=n("6783"),x={name:"CreateTweet",emits:["after-create-tweet"],setup:function(e,t){var n=t.emit,a=Object(v["e"])(),c=Object(O["c"])(),s=Object(r["b"])((function(){return!a.params.id||Number(c.state.currentUser.id)===Number(a.params.id)})),i=Object(r["x"])(!1),o=Object(r["x"])(""),u=new RegExp(/(^|\B)#(?![0-9_]+\b)([a-zA-Z0-9_\u4e00-\u9fa5]+)/,"g"),d=Object(r["b"])((function(){return u.test(o.value)?o.value.match(u):[]})),b=function(e){e=e.replace(u,(function(e){return'<span><a class="hashtag" href="#/hashtag/'.concat(e.toLowerCase().replace("#",""),'">').concat(e,"</a></span>")})),o.value=e},f=Object(r["b"])((function(){return!o.value.trim()})),p=function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(){var t,r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,o.value){e.next=4;break}return g["b"].fire({icon:"warning",title:"您尚未填寫任何貼文"}),e.abrupt("return");case 4:return i.value=!0,o.value=o.value.replace(/\n/g,"<br/>"),e.next=8,k["a"].create({tweetText:o.value,tags:d.value.map((function(e){return e.toLowerCase().replace("#","")}))});case 8:if(t=e.sent,r=t.data,"success"===r.status){e.next=12;break}throw new Error("無法新增貼文，請稍後再試");case 12:a=r.tweet,i.value=!1,n("after-create-tweet",a),o.value="",document.getElementById("inputTrueText").innerText="",e.next=25;break;case 19:e.prev=19,e.t0=e["catch"](0),g["b"].fire({icon:"error",title:"無法新增貼文，請稍後再試"}),i.value=!1,o.value="",console.log("Error: ",e.t0);case 25:case"end":return e.stop()}}),e,null,[[0,19]])})));return function(){return e.apply(this,arguments)}}();return{hashtags:d,replaceTweetText:b,isMyPage:s,isProcessing:i,tweetText:o,isTweetTextEmpty:f,handleSubmit:p}},computed:Object(u["a"])({},Object(O["b"])(["currentUser","isAuthenticated"]))};n("69b5");x.render=w;var y=x,T=n("15b0"),U=Object(r["h"])("h3",{class:"text-center pt-3 pb-2 border-bottom"},"編輯貼文",-1),C={class:"d-flex mx-4"},I={class:"me-2 my-auto"},S={class:"d-flex flex-column"},E={class:"text-align-end"},D={class:"d-flex mt-2 mb-3 mx-4"},A={class:"pb-3 mx-4"};function L(e,t){return Object(r["r"])(),Object(r["d"])(r["a"],null,[U,Object(r["h"])("form",{enctype:"application/x-www-form-urlencoded","aria-label":"建立 Tweet",action:"PUT",class:"bg-white rounded mt-3",onSubmit:t[2]||(t[2]=Object(r["I"])((function(){return e.handleSubmit&&e.handleSubmit.apply(e,arguments)}),["prevent"]))},[Object(r["h"])("div",C,[Object(r["h"])("div",I,[Object(r["h"])("img",{class:"avatar",src:e.currentUser.avatar,alt:"avatar"},null,8,["src"])]),Object(r["h"])("div",S,[Object(r["h"])("div",null,Object(r["B"])(e.currentUser.name),1),Object(r["h"])("div",null,Object(r["B"])(e.currentUser.email),1)])]),Object(r["h"])("div",E,[Object(r["h"])("div",D,[Object(r["H"])(Object(r["h"])("textarea",{class:"form-control resize-none",name:"description",cols:"30",rows:"11","onUpdate:modelValue":t[1]||(t[1]=function(t){return e.description=t}),ref:"textarea"},null,512),[[r["D"],e.description]])]),Object(r["h"])("div",A,[Object(r["h"])("button",{type:"submit",class:"btn btn-primary",disabled:e.isTweetTextEmpty||!e.isTweetTextChange}," 編輯 ",8,["disabled"])])])],32)],64)}var z={name:"EditTweet",props:{initialTweet:{type:Object}},emits:["after-edit-tweet"],setup:function(e,t){var n=t.emit,a=Object(r["b"])({get:function(){return e.initialTweet}}),c=Object(r["x"])(a.value.description),s=Object(r["b"])((function(){return""===c.value})),i=Object(r["b"])((function(){return c.value!==a.value.description})),o=Object(r["x"])(null),u=function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(){var t,r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k["a"].put({description:this.description,tweetId:this.tweet.id});case 3:if(t=e.sent,r=t.data,"success"===r.status){e.next=7;break}throw new Error(r.message||"無法編輯貼文，請稍後再試");case 7:a=r.tweet,n("after-edit-tweet",a),e.next=15;break;case 11:e.prev=11,e.t0=e["catch"](0),g["b"].fire({icon:"error",title:"無法編輯貼文，請稍後再試"}),console.log("Error: ",e.t0);case 15:case"end":return e.stop()}}),e,this,[[0,11]])})));return function(){return e.apply(this,arguments)}}();return{tweet:a,textarea:o,description:c,isTweetTextEmpty:s,isTweetTextChange:i,handleSubmit:u}},mounted:function(){this.$refs.textarea.focus()},computed:Object(u["a"])({},Object(O["b"])(["currentUser","isAuthenticated"]))};n("3323");z.render=L;var B=z,M=n("4cce"),P={components:{TweetCard:d["a"],CreateTweet:y,Mask:T["a"],EditTweet:B},props:{view:{type:String}},setup:function(e){var t=Object(r["x"])(!0),n=Object(r["b"])({get:function(){return e.view}}),a=Object(v["e"])(),c=a.params.id,s=Object(O["c"])(),i=Object(r["v"])({tweets:[]}),o=Object(r["l"])("isUserEdited"),u=Object(r["l"])("updateIsUserEdited"),d=function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(){var n,r,o,u,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,t.value=!0,n=function(e){if(!e)throw new Error(e.message);e=e.map((function(e){return e.isThumbsUp=e.LikedUsers.map((function(e){return e.id})).includes(s.state.currentUser.id),e.likedCount=e.LikedUsers.length,e})),e.sort((function(e,t){return new Date(t.createdAt)-new Date(e.createdAt)})),i.tweets=e},!a.path.includes("tweet")){e.next=11;break}return e.next=6,k["a"].get();case 6:r=e.sent,o=r.data,n(o),e.next=17;break;case 11:if(!a.path.includes("user")){e.next=17;break}return e.next=14,M["a"].getTweets({userId:c});case 14:u=e.sent,l=u.data,n(l);case 17:t.value=!1,e.next=25;break;case 20:e.prev=20,e.t0=e["catch"](0),t.value=!1,g["b"].fire({icon:"error",title:"無法取得貼文資料，請稍後再試"}),console.log("Error: ",e.t0);case 25:case"end":return e.stop()}}),e,null,[[0,20]])})));return function(){return e.apply(this,arguments)}}();Object(r["p"])(Object(l["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:d();case 1:case"end":return e.stop()}}),e)})))),Object(v["d"])((function(e,t,n){c=e.params.id,d(),n()}));var b=Object(r["x"])(""),f=Object(r["x"])({});return Object(r["F"])(b,(function(e,t){document.body.style.overflow=t?"auto":"hidden"})),Object(r["F"])(o,(function(e,t){t&&(i.tweets=i.tweets.map((function(e){return e.User.avatar=s.state.currentUser.avatar,e.User.name=s.state.currentUser.name,e}))),u(!1)})),{isLoading:t,key:n,tweetsData:i,isMask:b,toEditTweet:f}},methods:{afterCreateTweet:function(e){this.tweetsData.tweets.unshift({LikedUsers:[],Replies:[],User:this.currentUser,UserId:this.currentUser.id,createdAt:new Date,description:e.description,id:e.id,isThumbsUp:!1,likedCount:0,replyCount:0})},afterDeleteLike:function(e){var t=this;this.tweetsData.tweets=this.tweetsData.tweets.map((function(n){return n.id!==e||(n.LikedUsers=n.LikedUsers.filter((function(e){return e.id!==t.currentUser.id})),n.isThumbsUp=!1,n.likedCount=n.likedCount-1),n}))},afterAddLike:function(e){var t=this;this.tweetsData.tweets=this.tweetsData.tweets.map((function(n){return n.id!==e||(n.LikedUsers.push(t.currentUser),n.isThumbsUp=!0,n.likedCount=n.likedCount+1),n}))},afterCreateComment:function(e){var t=e.tweetId,n=e.comment,r=e.user,a=e.replyId;this.tweetsData.tweets=this.tweetsData.tweets.map((function(e){return e.id!==t||e.Replies.unshift({TweetId:t,User:r,UserId:r.id,comment:n,createdAt:new Date,id:a}),e}))},afterDeleteTweet:function(e){this.tweetsData.tweets=this.tweetsData.tweets.filter((function(t){return t.id!==e})),this.tweetsData.tweets.sort((function(e,t){return new Date(t.createdAt)-new Date(e.createdAt)}))},afterEditTweet:function(e){this.tweetsData.tweets=this.tweetsData.tweets.map((function(t){return e.id!==t.id||(t.description=e.description),t})),this.hideMask()},hideMask:function(){this.isMask="",this.toEditTweet={}},showMask:function(e){var t=e.key,n=e.id;this.isMask=t,this.toEditTweet=this.tweetsData.tweets.filter((function(e){return e.id===n}))[0]}},computed:Object(u["a"])({},Object(O["b"])(["currentUser","isAuthenticated"]))};n("6a0d");P.render=o;t["a"]=P},c894:function(e,t,n){},cd7e:function(e,t,n){"use strict";n("f96c")},dfd4:function(e,t,n){"use strict";n("211d")},f96c:function(e,t,n){}});
//# sourceMappingURL=app.c40f7b1f.js.map